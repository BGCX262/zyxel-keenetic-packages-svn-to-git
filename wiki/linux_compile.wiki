#summary Устанавливаем тулчейн и собираем пакеты из svn
== Необходимый пакеты для сборки в Linux ==

Для сборки программ, пакетов для Keenetic необходим установленный Linux. Подойдет почти любой дистрибутив. Потребуется установить в дистрибутиве ряд пакетов. Для Ubuntu обычно достаточно поставить следующие: 
{{{
sudo apt-get install git-core gawk libncurses5-dev libz-dev subversion flex bison autoconf libtool libssl-dev
}}}

Для других дистрибутивов linux набор пакетов может быть немного иным, используйте для определения требуемых пакетов [http://wiki.openwrt.org/doc/howto/buildroot.exigence таблицу из wiki openwrt] и примеры (Examples) ниже на странице wiki openwrt.

== Подготовка к сборке пакетов ==

Создадим, например, в домашней директории папку keenetic, перейдем в нее и "сольем в нее" набор исходников/скриптов с этого сайта:
{{{
svn checkout http://zyxel-keenetic-packages.googlecode.com/svn/trunk/ .
}}}

Нам потребуются еще исходники ядра с сайта zyxel.ru - http://zyxel.ru/agreementopensource
Скачаем их в произвольную папку и распакуем.

Перейдем в папку keenetic, где будет происходить сборка пакетов, и скопируем в нее _распакованные_ исходники ядра от zyxel:
{{{
cd ~/keenetic
mkdir dl
cp <путь к папке с исходниками zyxel>/dl/linux-2.6.23-rt.tar.bz2 dl/
}}}

*Примечание 1.* До ревизии 359 скриптов с этого сайта использовались исходные файлы ядра из архива `zyxel_keenetics_gpl_v.1.00_2_D0.tar.bz2`, начиная с ревизии 359 используются исходные коды из архива `zyxel_keenetics_gpl_v.1.00_4_D0.tar.bz2`. Подробнее об этом написано в файле `History` в папке `~/keenetic`.

*Примечание 2.* Можно скопировать все содержимое папки dl из из соответсвующей папки dl исходников zyxel - это немного сэкономит время и трафик при сборке, исходники многих пакетов не будут скачиваться.

*Примечание 3.* На этом подготовка завершена, папку с исходниками zyxel можно удалить, они больше не потребуются. Все дальнейшие операции проводятся в `~/keenetic`.

 

== Сборка пакетов из репозитария ==

Для сборки пакетов из репозитария скопируем файл `configs/keenetic.config` в директорию `$HOME/keenetic` под именем `.config`:
{{{
cp -f configs/keenetic.config .config
}}}
После этого выполняем `make menuconfig` и выходим по клавише `Esс` с сохранением. Остается только выполнить `make V=99` или просто `make` и подождать пока соберется toolchain и все пакеты. Собранные пакеты будут в папке `bin/keenetic/packages`.